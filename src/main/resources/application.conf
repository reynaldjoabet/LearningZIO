#api.authn.config

##web-authn-config{

 #Constants for environment variable names used throughout the application.
 #This ensures consistent naming and prevents typos when referencing environment variables.
  
# Redis Configuration
redis {
  host = ${?REDIS_HOST}
  host = "localhost"

  port = ${?REDIS_PORT}
  port = 6379

  password = ${?REDIS_PASSWORD}
  password = ""

  database = ${?REDIS_DATABASE}
  database = ""

  max-connections = ${?REDIS_MAX_CONNECTIONS}
  max-connections = 20
}


# Database Configuration
postgres {
  host = ${?DB_HOST}
  host = "localhost"

  port = ${?DB_PORT}
  port = 5432

  username = ${?DB_USERNAME}
  username = "postgres"

  password = ${?DB_PASSWORD}
  password = "postgres"

  database = ${?DB_DATABASE}
  database = "mydb"

  max-pool-size = ${?DB_MAX_POOL_SIZE}
  max-pool-size = 10
}
   
#Application Configuration
relying-party {
  id   = ${?RELYING_PARTY_ID}
  id   = "default-rp-id"

  name = ${?RELYING_PARTY_NAME}
  name = "Default App"
}

# Monitoring
open-telemetry {
  service-name     = ${?OPEN_TELEMETRY_SERVICE_NAME}
  service-name     = "my-service"

  jaeger-endpoint  = ${?OPEN_TELEMETRY_JAEGER_ENDPOINT}
  jaeger-endpoint  = "http://localhost:14268/api/traces"
}
#The ${?VAR_NAME} syntax tells HOCON:
#“Use this environment variable if it exists; otherwise skip it.”

  #JWT Key Rotation Configuration
# Best practice pattern
# Always write env override first, default second:
jwt {
  key-rotation-enabled  = ${?JWT_KEY_ROTATION_ENABLED}
  key-rotation-enabled  = false

  # Duration format: "30s", "1h", "7d"
  key-rotation-interval = ${?JWT_KEY_ROTATION_INTERVAL}
  key-rotation-interval = 30d

  key-grace-period      = ${?JWT_KEY_GRACE_PERIOD}
  key-grace-period      = 7d

  key-retention         = ${?JWT_KEY_RETENTION}
  key-retention         = 365d

  key-size              = ${?JWT_KEY_SIZE}
  key-size              = 2048

  key-id-prefix         = ${?JWT_KEY_ID_PREFIX}
  key-id-prefix         = "jwt-key-"

  master-encryption-key = ${?JWT_MASTER_ENCRYPTION_KEY}
}


#}